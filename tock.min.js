// Tock.js (version 2.1.0-dev) https://github.com/Falc/Tock.js
// License: MIT
!function(a,b){"function"===typeof define&&define.amd?define("Tock",[],function(){return a.returnExportsGlobal=b()}):"object"===typeof exports?module.exports=b():a.Tock=b()}(this,function(){function a(a){a=a||{},this.isCountdown=a.countdown||!1,this.startTime=a.startTime||0,this.interval=a.interval||10,this.onTick=a.onTick||function(){console.warn('Callback function for "onTick" is not defined.')},this.onComplete=a.onComplete||function(){console.warn('Callback function for "onComplete" is not defined.')},this.onStart=a.onStart||function(){},this.onStop=a.onStop||function(){},this.onReset=a.onReset||function(){},this.isRunning=!1,this.timeout=null,this.stoppedTime=this.startTime,this.startedAt=0,this.time=0,this.elapsed="0.0"}return Date.now=Date.now||function(){return+new Date},a.prototype.start=function(){if(!this.isRunning&&!(this.isCountdown&&this.stoppedTime<=0)){var a=this;this.startedAt=Date.now(),this.time=0,this.elapsed="0.0",this.isRunning=!0,this.timeout=window.setTimeout(function(){a.tick()},this.interval),"function"===typeof this.onStart&&this.onStart()}},a.prototype.stop=function(){this.isRunning&&(this.stoppedTime=this.lap(),this.isRunning=!1,window.clearTimeout(this.timeout),"function"===typeof this.onTick&&this.onTick(),"function"===typeof this.onStop&&this.onStop())},a.prototype.reset=function(){this.isRunning=!1,window.clearTimeout(this.timeout),this.timeout=null,this.stoppedTime=this.startTime,this.startedAt=0,this.time=0,this.elapsed="0.0","function"===typeof this.onTick&&this.onTick(),"function"===typeof this.onReset&&this.onReset()},a.prototype.tick=function(){var a=this;this.time+=this.interval,this.elapsed=Math.floor(this.time/this.interval)/10,Math.round(this.elapsed)===this.elapsed&&(this.elapsed+=".0");var b=Date.now()-this.startedAt-this.time,c=this.interval-b;if("function"===typeof this.onTick&&this.onTick(),this.isCountdown&&this.stoppedTime-this.time<0&&(this.stoppedTime=0,this.isRunning=!1,"function"===typeof this.onComplete&&this.onComplete()),c<=0){var d=Math.floor(Math.abs(c)/this.interval);return this.time+=d*this.interval,void(this.isRunning&&this.tick())}this.isRunning&&(this.timeout=window.setTimeout(function(){a.tick()},c))},a.prototype.lap=function(a){if(!this.isRunning)return 0===this.startedAt?this.format(this.startTime,a):this.format(this.stoppedTime,a);if(this.isCountdown){var b=this.stoppedTime-(Date.now()-this.startedAt);return b<0&&(b=0),this.format(b,a)}return this.format(this.stoppedTime+(Date.now()-this.startedAt),a)},a.prototype.format=function(a,b){if(void 0===b||"{L}"===b)return a;var c=b,d={},e=a,f=e%1e3;d.L=e.toString(),d.LL="000".substring(0,3-e.toString().length)+e.toString(),d.l=f.toString(),d.ll="000".substring(0,3-f.toString().length)+f.toString(),e=(e-f)/1e3;var g=e%60;d.S=e.toString(),d.SS="00".substring(0,2-e.toString().length)+e.toString(),d.s=g.toString(),d.ss="00".substring(0,2-g.toString().length)+g.toString(),e=(e-g)/60;var h=e%60;d.M=e.toString(),d.MM="00".substring(0,2-e.toString().length)+e.toString(),d.m=h.toString(),d.mm="00".substring(0,2-h.toString().length)+h.toString();var i=(e-h)/60;d.H=i.toString(),d.HH="00".substring(0,2-i.toString().length)+i.toString(),d.h=d.H,d.hh=d.h;for(var j=["HH","H","hh","h","MM","M","mm","m","SS","S","ss","s","LL","L","ll","l"],k=j.length-1;k>=0;k--)c=c.replace(new RegExp("{"+j[k]+"}","g"),d[j[k]]);return c},a});